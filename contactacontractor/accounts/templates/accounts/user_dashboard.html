{% extends 'app/base.html' %}

{% block content %}
    <h1>User Dashboard</h1>
    <div>
        <h2>Account Information</h2>
        <p>Username: {{ account.user.username }}</p>
        <p>Email: {{ account.user.email }}</p>
        <p>Balance: {{ account.balance }} â‚¬</p>
    </div>
    <div>
        <h2>Your Jobs</h2>
        {% if jobs %}
            {% for job in jobs %}
                <div style="border: 1px solid black;">
                    <h3>Title: {{ job.title }}</h3>
                    <p>Description: {{ job.description }}</p>
                    {% if job.is_completed %}
                        {% if not job.is_review_written %}
                            <a href="{% url 'accounts:submit_review' job.id %}">
                                <input type="button" value="Submit Review">
                            </a>
                            <a href="{% url 'accounts:submit_dispute' job.id %}">
                                <input type="button" value="Submit Dispute">
                            </a>
                        {% endif %}
                    {% else %}
                        {% if job.status == JOB_STATUS_AVAILABLE %}
                            <a href = "{% url 'accounts:view_quotes' job.id %}">
                                <input type="button" value="View Submited Quotes">
                            </a>
                        {% endif %}
                    {% endif %}
                    <a href="{% url 'accounts:job_status' job.id %}"><button>View Status</button></a>
                </div>
            {% endfor %}
        {% else %}
            <p>No jobs yet!</p>
        {% endif %}
    </div>
    <div>
        <h2>Your Messages</h2>
        {% if messages %}
            {% for message in messages %}
                <div style="border: 1px solid black;">
                    <h3>Sender: {{ message.sender }}:</h3>
                    <p>Message: {{ message.text }}</p>
                    <a href="{% url 'accounts:new_reply' message.id %}"><button>Reply</button></a>
                </div>
            {% endfor %}
        {% else %}
            <p>No messages yet!</p>
        {% endif %}
    </div>
    <br>
    
    {% if not account.contractor %}
        <p><a href="{% url 'accounts:become_contractor' %}">Sign up</a> to be a contractor!</p>
    {% endif %}

{% endblock content %}